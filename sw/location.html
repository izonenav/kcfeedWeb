<?
include "../admin/inc/config.php"; 
include "../admin/inc/mysql.inc.php"; 
include "../admin/inc/paging.inc.php"; 
include "../admin/inc/lib.inc.php"; 
include "../admin/inc/location.inc.php"; 

$pageNum = $_GET["pageNum"];
$findkey = $_GET["findkey"];



?>
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>소프트웨어 관리</title>

	 <!-- Bootstrap CSS CDN -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<!-- Our Custom CSS -->
	<link rel="stylesheet" href="/css/style.css">
<style>
.card 
{
    border-radius: 2px;
    border-top: 4px solid #7386D5;
    box-shadow: 0 2px 1px rgba(0, 0, 0, 0.05);
    border-left: none;
    border-right: none;
    border-bottom: none;
    margin-bottom: 30px;
    background: #fff;
}
.card-header
{
    display: block;
    color: #444;
    font-size: 16px;
    font-weight: 600;
	padding-bottom : 20px;
}
.table
{
	border-top: 1px solid rgb(236, 238, 239);
}

.card-header
{
	margin : 10px;
}

</style>
<script>
function remove(seq) 
{
	if(confirm("정말 삭제 하시겠습니까?")) 
	{
		$("#seq").val(seq);
		$("#mode").val("remove");
		submitForm.submit();
	} else 
	{
		location.reload();
	}
}

function save() 
{

	if($("#locationName").val().length < 1) 
	{
		alert("이름 입력해 주세요");
		return;
	};

	submitForm.submit();
}

function modify(seq,gubun,name) 
{
	$("#myModalLabel").html("위치 수정");
	$("#seq").val(seq);
	$("#mode").val("modify");
	$("#gubun").val(gubun);
	$("#locationName").val(name);
	$("#myModal").modal();
}

function add() 
{
	$("#myModalLabel").html("위치 추가");
	$("#mode").val("add");
	$("#locationName").val("");
	$("#gubun").val(0);
	$("#myModal").modal();

}

function listPaging(pageNum)
{
	search(pageNum);
}

function search(pageNum)
{
	if(typeof pageNum === "undefined")
	{
		pageNum = 1;
	}
	
	var findkey = $("#findkey").val();

	window.location.href = "employee.html?pageNum=" + pageNum;
}
</script>
</head>
    <body>
        <div class="wrapper">
            <!-- Sidebar Holder -->
			
			
				<? include "inc/nav.html"; ?>
				

            <!-- Page Content Holder -->
            <div id="content">

				
                <nav class="navbar navbar-default">
                    <div class="container">

                        <div class="navbar-header">
                            <button type="button" id="sidebarCollapse" class="btn btn-info navbar-btn">
                                <i class="glyphicon glyphicon-align-left"></i>
                                <span>Toggle Sidebar</span>
                            </button>
                        </div>
                    </div>
                </nav>


			<div class="col-md-12">
				<div class="card black">
					<div class="card-header">
						<div class="form-inline">
						  <div class="form-group">
								<div class="form-group">
									<input type="text" class="form-control" name="findkey" id="findkey" onkeypress="if(event.keyCode == 13) search()" placeholder="부서명을 입력하세요" />
								</div>
							</div>
						  <button  class="btn btn-default" onclick="search()">검색</button>
						</div>
					</div>
				</div>
				<div class="card">
				<div class="card-header">
					위치관리
				<button type="button" class="btn btn-primary pull-right" onclick='add();'>위치추가</button>
				</div>
				<div class="card-body">
				<table class="table table-striped table-hover">
				  <thead>
					<tr>
					  <th scope="col">#</th>
					  <th scope="col">구분</th>
					  <th scope="col">상세위치</th>
					  <th scope="col">Handle</th>
					</tr>
				  </thead>
				  <tbody>
					<?=$locationInfo?>


				  </tbody>
				</table>
				</div>
				</div>
				<ul class="pagination" style=float:right;>
					<?=$pg->getPages()?>
				</ul>
            </div>
			</div>
        </div>
				<!-- Modal -->
				<form name="submitForm" method="post" action="../admin/post/locationPost.php">
				<input type="hidden" name="mode" id="mode" value="">
				<input type="hidden" name="seq" id="seq" value="">
					<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
					  <div class="modal-dialog" role="document">
						<div class="modal-content">
						  <div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel"></h4>
						  </div>
						  <div class="modal-body">
						  	<label for="gubun">구분</label>
							<select id="gubun" name="gubun" class="form-control">
								<option value=0>지점을 선택하세요</option>
								<option value="본사">본사</option>
								<option value="식품사업부">식품사업부</option>
								<option value="직매소">직매소</option>
								<option value="대구사무소">대구사무소</option>
							</select>
						  </div>
						  <div class="modal-body">
							<label for="locationName">상세위치</label>
							<input name="locationName" type="text" class="form-control" id="locationName" placeholder="이름">
						  </div>					  
						  <div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
							<button type="button" class="btn btn-primary" onclick="save();">Save changes</button>
						  </div>
						</div>
					  </div>
					</div>
				</form>




        <!-- jQuery CDN -->
         <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
         <!-- Bootstrap Js CDN -->
         <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

         <script type="text/javascript">
             $(document).ready(function () {
                 $('#sidebarCollapse').on('click', function () {
                     $('#sidebar').toggleClass('active');
                 });
             });
         </script>
    </body>
</html>
